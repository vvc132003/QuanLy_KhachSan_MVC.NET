@model Model.Models.Modeldata
<link href="~/content/static/login/css/style.css" rel="stylesheet" />
<link href="~/content/static/login/css/font-awesome.css" rel="stylesheet" />
@Html.Partial("~/Views/layout/logo.cshtml")
<link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<div class="login-form w3_form">
    <div class="login-title w3_title">
    </div>
    <div class="signup w3_login">
        <h2 class="login-header w3_header">Đăng ký</h2>
        <div class="w3l_grid">
            <form class="login-container" Action="/KhachHang/TaoDangKy" method="post">
                <div class="row">
                    <div class="col-6">
                        <input type="text" placeholder="Họ và tên" name="hovaten" required="">
                        <input type="email" placeholder="Email" name="email" required="">
                        <input type="text" placeholder="CCCD" name="cccd" required="">
                        <select id="tinh" name="tinh" class="form-control">
                            <option value="" selected>Chọn tỉnh thành</option>
                        </select>
                    </div>
                    <div class="col-6">
                        <select id="huyen" name="huyen" class="form-control">
                            <option value="" selected>Chọn quận huyện</option>
                        </select>
                        <select id="phuong" name="phuong" class="form-control">
                            <option value="" selected>Chọn phường xã</option>
                        </select>
                        <input type="text" placeholder="Tài khoản" name="taikhoan" required="">
                        <input type="password" placeholder="Mật kẩu" name="matkhau" required="">
                    </div>
                    <input type="text" placeholder="Số điện thoại" name="sodienthoai" required="">
                </div>
                <input type="submit" value="Đăng ký">
            </form>
            <div class="second-section w3_section">
                <div class="bottom-header w3_bottom">
                    <h3>Hoặc</h3>
                </div>
                <div class="social-links w3_social">
                    <ul>
                        <li>
                            <a class="facebook" href="#" target="blank"><i class="fa fa-facebook"></i></a>
                        </li>
                        <li>
                            <a class="twitter" href="#" target="blank"><i class="fa fa-twitter"></i></a>
                        </li>
                        <li>
                            <a class="googleplus" href="#" target="blank">
                                <i class="fa fa-google-plus"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="bottom-text w3_bottom_text">
                <p>Đã có tài khoản?<a href="/dangnhap/dangnhap">Đăng nhập</a></p>
            </div>
        </div>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
<script>
    var citis = document.getElementById("tinh");
    var districts = document.getElementById("huyen");
    var wards = document.getElementById("phuong");
    var Parameter = {
        url: "https://raw.githubusercontent.com/kenzouno1/DiaGioiHanhChinhVN/master/data.json",
        method: "GET",
        responseType: "application/json",
    };
    var promise = axios(Parameter);
    promise.then(function (result) {
        renderCity(result.data);
    });

    function renderCity(data) {
        for (const x of data) {
            var opt = document.createElement('option');
            opt.value = x.Name;
            opt.text = x.Name;
            opt.setAttribute('data-id', x.Id);
            citis.options.add(opt);
        }
        citis.onchange = function () {
            districts.length = 1;
            wards.length = 1;
            if (this.options[this.selectedIndex].dataset.id != "") {
                const result = data.filter(n => n.Id === this.options[this.selectedIndex].dataset.id);

                for (const k of result[0].Districts) {
                    var opt = document.createElement('option');
                    opt.value = k.Name;
                    opt.text = k.Name;
                    opt.setAttribute('data-id', k.Id);
                    districts.options.add(opt);
                }
            }
        };
        districts.onchange = function () {
            wards.length = 1;
            const dataCity = data.filter((n) => n.Id === citis.options[citis.selectedIndex].dataset.id);
            if (this.options[this.selectedIndex].dataset.id != "") {
                const dataWards = dataCity[0].Districts.filter(n => n.Id === this.options[this.selectedIndex].dataset.id)[0].Wards;

                for (const w of dataWards) {
                    var opt = document.createElement('option');
                    opt.value = w.Name;
                    opt.text = w.Name;
                    opt.setAttribute('data-id', w.Id);
                    wards.options.add(opt);
                }
            }
        };
    }
</script>